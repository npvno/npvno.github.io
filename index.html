<!DOCTYPE html>
<html>
<head>
    <title>Using JSON Data in HTML</title>
</head>
<body>
    <h1>JSON Data</h1>
    
    <!-- Create a container for the user data -->
    <div id="user-container"></div>
    
    <script>
        // Load and parse the JSON data
        fetch('data.json')
            .then(response => response.json())
            .then(data => {
                const userContainer = document.getElementById('user-container');

                // Iterate through the users and create HTML elements
                data.users.forEach(user => {
                    const userDiv = document.createElement('div');
                    const usernameLink = document.createElement('a');
                    usernameLink.href = `https://www.instagram.com/${user.username}`;
                    usernameLink.target = '_blank';
                    usernameLink.textContent = user.username;
                    userDiv.appendChild(usernameLink);

                    const postTable = document.createElement('table');
                    postTable.style.width = '100%';
                    
                    user.postIDs.forEach(postID => {
                        const postTableRow = document.createElement('tr');
                        const postTableCell = document.createElement('td');
                        const postLink = document.createElement('a');
                        postLink.href = `https://www.instagram.com/p/${postID}`;
                        postLink.target = '_blank';
                        postLink.textContent = `Post ID: ${postID}`;
                        postTableCell.appendChild(postLink);
                        postTableRow.appendChild(postTableCell);
                        postTable.appendChild(postTableRow);
                    });
                    
                    userDiv.appendChild(postTable);
                    userContainer.appendChild(userDiv);
                });
            })
            .catch(error => {
                console.error('Error loading JSON data:', error);
            });
    </script>
    <script src="https://www.instagram.com/embed.js"></script>


<h1>Click the Button to Run Script</h1>

<input type="text" id="tokenInput" size="45" placeholder="Enter GitHub Token">

<button id="triggerButton">Trigger Workflow</button>

<script type="module">
  import { Octokit } from "https://esm.sh/@octokit/core";

  function triggerWorkflow() {
    const token = document.getElementById('tokenInput').value;
    const owner = 'npvno';
    const repo = 'npvno.github.io';

    // Create a payload for the repository dispatch event
    const payload = {
      event_type: 'button-pressed' // Replace with your event type
    };

    fetch(`https://api.github.com/repos/${owner}/${repo}/dispatches`, {
      method: 'POST',
      headers: {
        'Authorization': `token ${token}`,
        'Accept': 'application/vnd.github.v3+json',
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(payload)
    })
      .then(response => {
        if (response.ok) {
          console.log('Workflow triggered successfully.');
        } else {
          console.error('Failed to trigger workflow:', response.statusText);
        }
      })
      .catch(error => {
        console.error('Error:', error);
      });
  }

  document.getElementById('triggerButton').addEventListener('click', triggerWorkflow);
</script>


</body>
</html>
